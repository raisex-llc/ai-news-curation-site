import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.BVOCwoKb.js";const w="https://github.com/raisex-llc/ai-news-curation-site/blob/gh-pages/assets/ai-icon.png?raw=true",b=40;function j(n){return n?.toLowerCase().replace(/\s+/g,"").trim()}function D(){const[n,u]=r.useState([]),[x,h]=r.useState([]),[f,p]=r.useState(!0),[t,i]=r.useState(1),[l,g]=r.useState(""),[c,v]=r.useState("");r.useEffect(()=>{const s=a=>{const{q:d,media:m}=a.detail||{};g(d?.toLowerCase()??""),v(j(m??"")),i(1)};return window.addEventListener("searchUpdate",s),()=>window.removeEventListener("searchUpdate",s)},[]),r.useEffect(()=>{fetch("/ai-news-curation-site/articles.json").then(s=>s.json()).then(s=>{const a=s.sort((d,m)=>new Date(m.pubDate).getTime()-new Date(d.pubDate).getTime());u(a),p(!1)})},[]),r.useEffect(()=>{const s=n.filter(a=>{const d=`${a.title} ${a.description} ${a.summary}`.toLowerCase(),m=j(a.source);return(!l||d.includes(l))&&(!c||m===c)});h(s)},[n,l,c]);const o=Math.ceil(x.length/b),y=x.slice((t-1)*b,t*b);return e.jsxs("div",{children:[e.jsxs("div",{className:"fixed top-0 left-0 w-full z-[9999] bg-gray-100 py-1 text-center text-sm text-blue-700 shadow-sm",children:[t>1&&e.jsx("button",{onClick:()=>i(t-1),className:"mr-2 hover:underline",children:"â† å‰ã®ãƒšãƒ¼ã‚¸"}),"ãƒšãƒ¼ã‚¸ ",t," / å…¨",o,"ãƒšãƒ¼ã‚¸",t<o&&e.jsx("button",{onClick:()=>i(t+1),className:"ml-2 hover:underline",children:"æ¬¡ã®ãƒšãƒ¼ã‚¸ â†’"})]}),f&&e.jsx("div",{id:"search-overlay",className:"fixed inset-0 z-40 bg-white/80 backdrop-blur-sm flex items-center justify-center text-xl font-bold text-red-600",children:"ğŸ” æ¤œç´¢ä¸­ã§ã™â€¦ å°‘ã€…ãŠå¾…ã¡ãã ã•ã„"}),e.jsx("div",{className:"mt-12 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:y.map((s,a)=>e.jsx(N,{article:s},a))}),o>1&&e.jsxs("div",{className:"flex flex-wrap justify-center items-center mt-8 gap-4 text-sm text-blue-600",children:[t>1&&e.jsx("button",{onClick:()=>i(t-1),className:"hover:underline",children:"â† å‰ã®ãƒšãƒ¼ã‚¸"}),e.jsxs("span",{children:["ãƒšãƒ¼ã‚¸ ",t," / å…¨",o,"ãƒšãƒ¼ã‚¸"]}),t<o&&e.jsx("button",{onClick:()=>i(t+1),className:"hover:underline",children:"æ¬¡ã®ãƒšãƒ¼ã‚¸ â†’"})]})]})}function N({article:n}){const{title:u,pubDate:x,description:h,summary:f,thumbnail:p,url:t}=n,i=n.media??n.source??"åª’ä½“ä¸æ˜",l=j(i),g=new Date(x).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",timeZone:"Asia/Tokyo"});return e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"article-card bg-white shadow rounded-lg overflow-hidden border border-gray-200 flex flex-col h-full min-h-[400px] transition-transform duration-200 hover:shadow-xl hover:scale-[1.02] active:scale-95","data-media":l,children:[e.jsx("div",{className:"text-base text-sky-500 font-bold px-3 pt-3",children:i}),e.jsx("div",{className:"px-3 pt-2",children:e.jsx("img",{src:p||w,alt:u,className:"w-full aspect-video object-cover rounded-md bg-gray-100",loading:"lazy",onError:c=>c.target.src=w})}),e.jsxs("div",{className:"p-3 flex flex-col justify-between h-full",children:[e.jsx("div",{className:"block text-base font-bold text-blue-600 hover:underline mb-1 leading-snug",children:u}),e.jsx("p",{className:"text-sm text-black mb-2",children:g}),e.jsx("p",{className:"text-gray-700 text-sm line-clamp-2",children:f||h})]})]})}export{D as ArticleList};
